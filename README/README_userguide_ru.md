# Руководство пользователя FramePack-eichi | [日本語](README_userguide.md) | [English](README_userguide_en.md) | [繁體中文](README_userguide_zh.md)

В этом руководстве подробно объясняется, как использовать стандартную и F1 версии FramePack-eichi. Поскольку каждая версия имеет свои особенности и области применения, выберите оптимальную модель в соответствии с вашими целями. Для получения базовой информации и инструкций по установке см. [README](README.md), для подробных настроек - [Расширенная документация](README_column.md), для истории обновлений - [Журнал изменений](README_changelog.md).

## Содержание

- [Что такое FramePack-eichi](#что-такое-framepack-eichi)
- [Различия между стандартной и F1 версиями](#различия-между-стандартной-и-f1-версиями)
- [Использование стандартной версии](#использование-стандартной-версии)
- [Использование версии F1](#использование-версии-f1)
- [Использование версии oichi (однокадровая версия)](#использование-версии-oichi-однокадровая-версия)
- [Подробное описание настроек](#подробное-описание-настроек)
- [Устранение неполадок](#устранение-неполадок)

## Что такое FramePack-eichi

FramePack-eichi - это AI-инструмент для генерации видео из изображений. Он позволяет создавать "движение", которое недоступно в обычных генераторах изображений. Вы можете создавать короткие видео из статичных изображений или создавать анимацию на основе нескольких ключевых кадров.

У этого инструмента есть две версии:

1. **Стандартная версия (Standard)**: Модель, специализирующаяся на контроле ключевых кадров
2. **Версия F1 (F1)**: Модель, специализирующаяся на прямой генерации

## Различия между стандартной и F1 версиями

|Функция|Стандартная версия (Standard)|Версия F1 (F1)|
|---|---|---|
|**Основная концепция**|Точное управление движением через ключевые кадры|Естественные и активные движения через прямую генерацию|
|**Ключевые кадры**|Можно указать несколько изображений секций|Используется только первое изображение|
|**Конечный кадр**|Можно указать явно|Только автоматическая генерация|
|**Степень влияния изображения**|1.0～100.0%|100.0～102.0%|
|**Подходит для**|Когда нужен точный контроль движения|Когда нужны естественные и непредсказуемые движения|
|**Настраиваемость**|Высокая (детальный контроль каждой секции)|Низкая (указание общей атмосферы)|
|**Кривая обучения**|Умеренно высокая (необходимо понимать несколько параметров)|Низкая (простое управление)|

## Использование стандартной версии

### 1. Как запустить

Для использования стандартной версии запустите один из следующих bat-файлов:

- Японская версия: `run_endframe_ichi.bat`
- Английская версия: `run_endframe_ichi_en.bat`
- Китайская версия: `run_endframe_ichi_zh-tw.bat`
- Русская версия: `run_endframe_ichi_ru.bat`

### 2. Основное использование

1. **Выбор режима видео**:
   - Выберите режим с нужной длительностью из выпадающего меню "Режим видео" в правом верхнем углу
   - Доступные режимы для стандартной версии: 1-20 секунд, 30 секунд, 40 секунд ※v1.9.3 расширение
   - Режим определяет количество секций (например: "4 секунды" = 4 секции)

2. **Настройка изображений ключевых кадров**:
   - Выберите вкладки от "0" до "количество секций-1" для настройки изображений каждой секции
   - Нажмите кнопку "Image" для загрузки изображения (или "Clipboard" для вставки из буфера обмена)
   - Проверьте красную/синюю рамку для понимания роли изображения как ключевого кадра (показывает копирование в четные/нечетные секции)

3. **Конечный кадр (опционально)**:
   - Выберите вкладку "Final"
   - Нажмите кнопку "Image" для загрузки изображения конечного кадра (или из буфера обмена)

4. **Настройка промптов**:
   - Можно установить промпт для каждой секции (текстовое поле под вкладкой секции)
   - Во вкладке "Base" устанавливается базовый промпт, общий для всех секций
   - "Негативный промпт" используется для исключения нежелательных элементов

5. **Детальные настройки**:
   - "Степень влияния EndFrame": регулирует влияние конечного кадра (0.01～1.00)
   - "Копирование ключевых кадров": включение/выключение функции автоматического копирования
   - "Seed": установка значения seed для генератора случайных чисел (-1 для случайного)

6. **Настройки LoRA (опционально)**:
   - Можно применить модель LoRA для настройки выражения
   - Введите путь к файлу .safetensors после "path1:"
   - Установите вес в "weight1:" (0.0～1.0)
   - **Менеджер пресетов ※новая функция v1.9.3**:
     - Сохранение и управление до 5 пресетов
     - Легкое переключение пресетов из интерфейса
     - Пакетное сохранение файлов LoRA, силы и других настроек

7. **Генерация видео**:
   - После завершения всех настроек нажмите кнопку "Start"
   - По завершении процесса генерации видео сохраняется в выходную папку и автоматически воспроизводится

### 3. Расширенное использование

#### Использование функции цикла и её ограничения

Обычная версия FramePack-eichi включает «Режим цикла», но имеет следующие ограничения:

##### Ограничения функции цикла
- **Технические ограничения**: Из-за особенностей моделей генерации видео с ИИ, создание идеально бесшовных циклов технически сложно
- **Микро-вариации между кадрами**: Тонкие различия в кадрах, сгенерированных ИИ, могут вызвать неестественность в местах соединения цикла
- **Ограничения временной согласованности**: Базовая модель Hunyuan Video имеет ограничения в временной согласованности

##### Рекомендуемое альтернативное решение
Для пользователей, которым нужны высококачественные и точные циклы, мы рекомендуем использовать **[FramePackLooP](https://github.com/red-polo/FramePackLoop)**, специально разработанный для генерации циклов.

##### Планы будущих улучшений
Мы исследуем улучшения через инструменты склеивания тензоров и изучаем возможность использования этих технологий для функции цикла в будущих релизах.

#### Функция массового добавления информации о секциях

- Можно использовать zip-файл для установки информации о нескольких секциях одновременно
- Структура zip-файла:
  ```
  zipname.zip
  ├── anydir/ (папка только на 1 уровень, или можно без папки)
  │ ├── sections.yaml (обязательно)
  │ ├── start.png (начальный кадр, опционально. Имя файла должно начинаться с start*)
  │ ├── end.png (конечный кадр, опционально. Имя файла должно начинаться с end*)
  │ ├── 000.png (изображение секции 0. Имя файла должно начинаться с 3-значного числа)
  │ ├── 001.png (изображение секции 1. Имя файла должно начинаться с 3-значного числа)
  ```
- Формат sections.yaml:
  ```yaml
  section_info:
    - section: 0
      prompt: "Персонаж протягивает руку"
    - section: 1
      prompt: "Персонаж поворачивается сюда"
  ```
- При загрузке автоматически устанавливаются изображения секций и промпты

#### Использование функции копирования ключевых кадров

- Когда "Копирование ключевых кадров" включено, изображение секции 0 (красная рамка) копируется в четные секции (0, 2, 4...), а изображение секции 1 (синяя рамка) - в нечетные секции (1, 3, 5...)
- Это позволяет эффективно генерировать видео с минимальными настройками изображений
- Особенно эффективно для длинных видео (10 секунд и более)

#### Настройка промптов для каждой секции

- Промпт каждой секции определяет её характеристики
- Поскольку он используется в сочетании с базовым промптом, достаточно описать только специфические для секции особенности
- Эффективно включать слова, выражающие изменение движения ("бежать" → "прыгать" → "сидеть" и т.д.)

#### Регулировка степени влияния EndFrame

- Высокие значения (близкие к 1.00): сильная сходимость к конечному кадру, тенденция к линейным движениям
- Низкие значения (близкие к 0.01): слабая сходимость к конечному кадру, движения с большей степенью свободы
- Для естественности движений рекомендуется около 0.1～0.3

## Использование версии F1

### 1. Как запустить

Для использования версии F1 запустите один из следующих bat-файлов:

- Японская версия: `run_endframe_ichi_f1.bat`
- Английская версия: `run_endframe_ichi_en_f1.bat`
- Китайская версия: `run_endframe_ichi_zh-tw_f1.bat`
- Русская версия: `run_endframe_ichi_f1_ru.bat`

### 2. Основное использование

1. **Выбор режима видео**:
   - Выберите режим с нужной длительностью из выпадающего меню "Режим видео" в правом верхнем углу
   - Доступные режимы для версии F1: 1-20 секунд, 30 секунд, 40 секунд, 60 секунд, 120 секунд ※v1.9.3 расширение
   - В версии F1 используется только первое изображение секции

2. **Настройка начального изображения**:
   - Нажмите кнопку "Image" для загрузки изображения (или "Clipboard" для вставки из буфера обмена)
   - Это изображение становится первым кадром видео, последующие генерируются автоматически

3. **Настройка промптов**:
   - Установите промпт во вкладке "Base" (в версии F1 используется только этот промпт)
   - "Негативный промпт" используется для исключения нежелательных элементов

4. **Детальные настройки**:
   - "Степень влияния изображения": регулирует влияние начального изображения (100.0～102.0%)
   - "Seed": установка значения seed для генератора случайных чисел (-1 для случайного)

5. **Настройки LoRA (опционально)**:
   - Можно применить модель LoRA для настройки выражения
   - Введите путь к файлу .safetensors после "path1:"
   - Установите вес в "weight1:" (0.0～1.0)
   - **Менеджер пресетов ※новая функция v1.9.3**:
     - Сохранение и управление до 5 пресетов
     - Легкое переключение пресетов из интерфейса
     - Пакетное сохранение файлов LoRA, силы и других настроек

6. **Генерация видео**:
   - После завершения всех настроек нажмите кнопку "Start"
   - По завершении процесса генерации видео сохраняется в выходную папку и автоматически воспроизводится

### 3. Советы по использованию версии F1

#### Правильная регулировка степени влияния изображения

- **100.0%**: Генерируется видео, очень верное начальному изображению. Персонажи и композиция не меняются значительно, максимальная стабильность.
- **100.5%**: Сбалансированная настройка, сочетающая некоторые изменения со стабильностью.
- **101.0～102.0%**: Возникают более смелые движения и изменения, но возможно отклонение от начального изображения.

#### Направление движения через промпты

- Использование глаголов и слов, обозначающих действия, позволяет направлять определенные движения
  - Пример: "walking", "running", "jumping", "dancing" и т.д.
- Можно указывать не только движения персонажа, но и работу камеры
  - Пример: "zoom in", "pan left", "closeup" и т.д.

#### Понимание особенностей версии F1

- Новая версия F1 - это "FramePack_F1_I2V_HY_20250503", модель, специализирующаяся на прямой генерации
- В отличие от стандартной версии, нельзя указать детальные движения, но возможны более естественные и непредсказуемые движения
- Эффективно использовать для указания общего направления промптом, оставляя детали на усмотрение AI

## Использование версии oichi (однокадровая версия)

### 1. Обзор

Версия oichi - это специальная версия, которая генерирует следующий кадр из одного изображения. Она специализируется на предсказании одного кадра вперед, а не на генерации всего видео, что позволяет обрабатывать легче и быстрее. В v1.9.3 была добавлена функция kisekaeichi.

### 2. Как запустить

Для использования версии oichi запустите один из следующих bat-файлов:

- Японская версия: `run_oneframe_ichi.bat`
- Английская версия: `run_oneframe_ichi_en.bat`
- Китайская версия: `run_oneframe_ichi_zh-tw.bat`
- Русская версия: `run_oneframe_ichi_ru.bat`

### 3. Основное использование

1. **Настройка изображения**:
   - Загрузите одно изображение
   - Из этого изображения будет сгенерирован следующий кадр

2. **Настройка промпта**:
   - Опишите содержание следующего кадра, который вы хотите сгенерировать
   - Детально укажите движения или изменения

3. **Функция kisekaeichi ※новая функция v1.9.3**:
   - Технология использования эталонных изображений, разработанная furusu и реализованная Kohya
   - Точный контроль с использованием целевого индекса и индекса истории
   - Функция маски для изменения только определенных областей
   - Используется при применении различных костюмов или стилей

4. **Запуск генерации**:
   - Нажмите кнопку "Generate"
   - Будет сгенерирован следующий кадр

### 4. Подробности функции kisekaeichi

- **Настройка эталонного изображения**: Установите эталонное изображение для стиля или костюма, который хотите изменить
- **Функция маски**: Укажите область, которую хотите изменить (возможны полные или частичные изменения)
- **Регулировка силы**: Регулируйте степень влияния эталонного изображения
- **Примечание**: Как экспериментальная функция, результаты сильно зависят от входного и эталонного изображений

## Подробное описание настроек

### Общие настройки

#### Связанные с промптами
- **Промпт**: Текст, указывающий содержание генерируемого видео. Подробно опишите желаемые элементы и характеристики
- **Негативный промпт**: Текст, указывающий элементы, которых следует избегать. Включение "low quality", "blurry" и т.д. улучшает качество

#### Технические настройки
- **Seed**: Значение seed для генератора случайных чисел. Одинаковые значения дают похожие результаты. "-1" для случайного
- **Оптимизация FP8**: Опция для сокращения использования VRAM при применении LoRA. Особенно эффективна для GPU RTX серии 40
- **Обработка масштаба**: Указывает метод регулировки разрешения видео
- **Выходная папка**: Место сохранения сгенерированных файлов
- **Качество MP4**: Настройка степени сжатия видео (0-100, чем ниже, тем выше качество, чем выше, тем легче файл)

#### Настройки LoRA
- **LoRA Path**: Путь к файлу используемой модели LoRA
- **LoRA Weight**: Степень влияния каждой модели LoRA (0.0～1.0)

### Настройки, специфичные для стандартной версии

- **Копирование ключевых кадров**: При включении автоматически копирует изображения по определенному шаблону
- **Степень влияния EndFrame**: Регулирует силу влияния конечного кадра (0.01～1.00)
- **Вкладки секций (0, 1, 2...)**: Экраны настройки каждого ключевого кадра
- **Вкладка Final**: Экран настройки конечного кадра

### Настройки, специфичные для версии F1

- **Степень влияния изображения**: Степень влияния начального изображения (100.0～102.0%)
  - 100.0%: Очень верно начальному изображению
  - 100.5%: Сбалансированные изменения
  - 101.0～102.0%: Более смелые изменения и движения

## Устранение неполадок

### Общие проблемы

#### Генерируется черный экран
- **Причина**: Недостаток GPU VRAM, конфликт размера пакета или процессов
- **Решение**:
  - Завершите другие GPU-процессы
  - Включите оптимизацию FP8
  - Установите значение качества MP4 около 16
  - Используйте режим более короткого видео (1 секунда, 2 секунды и т.д.)

#### Ошибка: CUDA out of memory
- **Причина**: Недостаток GPU VRAM
- **Решение**:
  - Включите оптимизацию FP8
  - Используйте режим короткого видео
  - Завершите другие GPU-процессы
  - Используйте изображения с меньшим разрешением

#### Промпт не отражается должным образом
- **Причина**: Неясный приоритет или выражение промпта
- **Решение**:
  - Размещайте важные элементы в начале
  - Используйте скобки или синтаксис усиления (например: (important element))
  - Используйте более конкретные слова
  - Для стандартной версии проверьте комбинацию промптов для каждой секции и базового промпта

### Проблемы, специфичные для стандартной версии

#### Неестественные изменения между секциями
- **Причина**: Слишком большой разрыв между ключевыми кадрами
- **Решение**:
  - Используйте изображения ключевых кадров с более похожими характеристиками
  - Разделите изменения на этапы и выразите их через несколько секций
  - Отрегулируйте степень влияния EndFrame

#### Ключевые кадры игнорируются
- **Причина**: Слишком низкая степень влияния изображения
- **Решение**:
  - Увеличьте степень влияния изображения (рекомендуется 50% и выше)
  - Подчеркните характеристики ключевых кадров в промпте

### Проблемы, специфичные для версии F1

#### Сильное отклонение от начального изображения
- **Причина**: Слишком высокая степень влияния изображения
- **Решение**:
  - Уменьшите степень влияния изображения (рекомендуется 100.0～100.5%)
  - Более конкретно опишите в промпте

#### Мало движения/монотонность
- **Причина**: Недостаток выражений, указывающих движение в промпте
- **Решение**:
  - Добавьте глаголы и слова, обозначающие действия
  - Увеличьте степень влияния изображения (101.0～102.0%)
  - Выберите режим более длинного видео